"use strict";(self.webpackChunkwebpack_boilerplate=self.webpackChunkwebpack_boilerplate||[]).push([[179],{760:(e,n,t)=>{t.d(n,{xz:()=>$,IS:()=>T,cO:()=>w});const o="a2729dfa-bf13-49de-9582-75bee29e8957",i="https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_100_POPULAR_FILMS&page=",c="https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_250_BEST_FILMS&page=",r="https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_AWAIT_FILMS&page",s="https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?keyword=",a="https://kinopoiskapiunofficial.tech/api/v2.2/films/",l=document.querySelector(".modal"),d=function(){const e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.append(e);const n=e.offsetWidth-e.clientWidth;return e.remove(),n}();function u(e,n){if(n.target&&n.target.matches(".popup-play")){const n=e.getAttribute("id");E(`${a}${n}/videos`)}else if(n.target){const n=e.previousElementSibling;E(`${a}${n.getAttribute("id")}`)}}function m(e){const n=document.querySelector(".modal-content");n.classList.add(e),n.parentElement.style.maxWidth="720px"}function v(e){return e||"delete"}function p(e){const n=document.querySelector(".counter"),t=document.querySelector(".numbers.active");n.innerHTML=`${t.innerHTML}/${e.length}`}const f=document.getElementById("popular"),y=document.getElementById("best"),g=document.getElementById("await");function h(e){let n=[];if(e.includes("AWAIT"))n=[1];else{const t=e.search("TOP"),o=e.substr(t+4,3)/20;for(let e=0;e<o;e++)n.push(e+1)}!function(e){L.innerHTML="",e.forEach((e=>{const n=`<a href="#" class="numbers">${e}</a>`;L.insertAdjacentHTML("beforeend",n)})),e.length>5&&(function(e){L.insertAdjacentHTML("afterbegin",'<a href="#" class="prev arrow">\n    <i class="fas fa-chevron-up"></i>\n    </a>'),L.insertAdjacentHTML("beforeend",'<a href="#" class="next arrow">\n      <i class="fas fa-chevron-up"></i>\n      </a>'),function(e){document.querySelector(".prev").addEventListener("click",(n=>{n.preventDefault();const t=document.querySelector(".numbers.active");t.innerHTML==e[0]?document.querySelectorAll(".numbers")[e.length-1].click():t.previousElementSibling.click(),p(e)}))}(e),function(e){document.querySelector(".next").addEventListener("click",(n=>{n.preventDefault();const t=document.querySelector(".numbers.active");t.innerHTML==e.length?document.querySelectorAll(".numbers")[0].click():t.nextElementSibling.click(),p(e)}))}(e)}(e),document.querySelectorAll(".numbers").forEach((e=>e.style.display="none")),L.insertAdjacentHTML("beforeend",`<div class="counter">1/${e.length}</div>`))}(n),function(e){const n=document.querySelectorAll(".numbers"),t=document.querySelector(".numbers");n.forEach((t=>{t.addEventListener("click",(o=>{o.preventDefault(),b.scrollIntoView({behavior:"smooth"}),$(n),w(t),E(`${e}${t.innerHTML}`)}))})),t.click()}(e)}const b=document.querySelector(".movies"),L=document.querySelector(".page");async function E(e){try{const t=await fetch(e,{headers:{"Content-Type":"application/json","X-API-KEY":`${o}`}}),i=await t.json();e.includes("top")||e.includes("search")?(n=i,b.innerHTML="",function(e){if(0===e.searchFilmsCountResult){const n=`\n        <span class="movies-err">К сожалению, поиск по сайту не дал никаких результатов.\n        <br>Попробуйте изменить или сократить запрос: <br><b>${e.keyword}</b></span>\n        `;b.insertAdjacentHTML("beforeend",n)}}(n),n.films.forEach((e=>{const n=document.createElement("div");var t,o,i;n.classList.add("movie"),n.innerHTML=`\n      <div class="movie-inner">\n        <img src="${e.posterUrlPreview}" alt="${e.nameRu} Img">\n        <div class="movie-orange"></div>\n      </div>\n      <div class="movie-more">\n        <img id="${e.filmId}" class='popup-play' src="assets/play.svg" alt="Play Img">\n        <div class="more-information">О фильме</div>\n      </div>\n      </div>\n      <div class="movie-info">\n        <div class="movie-title">${e.nameRu}</div>\n        <div class="movie-category">${e.genres.map((e=>{return` ${n=e.genre,"unefined"==n?"":n}`;var n}))}</div>\n          <div class="movie-average average-${o=e.rating,o&&"null"!=o&&"undefined"!=o?o>=7?"green":o>5?"orange":"red":"none"}">${t=e.rating,t?t.includes("%")?t.slice(0,2).split("").join("."):t:void 0}</div>\n          </div>\n      `,b.append(n),"undefined"==(i=n).querySelector(".movie-title").innerHTML&&i.remove()})),function(){const e=[document.querySelectorAll(".popup-play"),document.querySelectorAll(".more-information")];for(let n of e)n.forEach((e=>{e.addEventListener("click",(n=>{u(e,n),l.innerHTML="",l.classList.toggle("active"),document.body.style.overflow="hidden",document.body.style.marginRight=`${d}px`}))}))}()):function(e){const n=document.createElement("div");n.classList.add("modal-dialog"),n.innerHTML='\n  <div class="modal-content">\n    <form action="#">\n        <div class="modal-close">&times;</div>\n    </form>\n  </div>\n  ',l.append(n),e.nameRu||e.description?function(e){const n=document.querySelector(".modal-content form");m("description");const t=`\n  <div class="modal-name_film">${e.nameRu}</div>\n  <div class="modal-text">${o=e.description,o||"<b>К сожалению,</b> описание к данному фильму у нас отстствует."}</div>\n  <div class="modal-information">\n    <div title="Age Limits">\n        <img src="assets/age.png" alt="Age Img">\n        <p>${i=e.ratingAgeLimits,i=i?`${i.slice(3,i.length)}+`:"delete"}</p>\n    </div>\n    <div title="Countries">\n      <img src="assets/countries.png" alt="Countries Img">\n      <p>${e.countries.map((e=>` ${v(e.country)}`))}</p>\n    </div>\n    <div title="Year">\n      <img src="assets/calendar.png" alt="Year Img">\n      <p>${v(e.year)}</p>\n    </div>\n  </div>\n  `;var o,i;n.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".modal-information p").forEach((e=>{"delete"!==e.innerHTML&&""!==e.innerHTML||e.parentElement.remove()}))}(e):function(e){const n=e.items,t=[];let o;if(n.forEach((e=>{let{site:n,name:o}=e;"YOUTUBE"===n&&(o.toLowerCase().includes("трейлер")||o.toLowerCase().includes("тизер"))&&t.push(e)})),0===t.length)!function(){const e=document.querySelector(".modal-content form");m("error"),e.insertAdjacentHTML("beforeend",'\n  <div class="modal-title">К сожалению, у нас нет подходящего трейлера!</div>\n  <img class=\'modal-img\' src="assets/sad-smile.png" alt="">\n  ')}();else{for(let e=0;e<t.length;e++){const n=t[e].name,i=t[e].url;if(n.match(/рус/i)||n.match(/дубл/i)){o=i;break}}void 0===o&&(o=t[0].url);const e=document.querySelector(".modal-content form"),n=`\n      <iframe class="modal-video" width="100%" src="https://www.youtube.com/embed/${o.substr(o.length-11)}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n      `;e.insertAdjacentHTML("beforeend",n)}}(e),function(){function e(){l.classList.toggle("active");const e=document.querySelector(".modal-video");e&&e.remove(),document.body.style.overflow="",document.body.style.marginRight="0px"}l.querySelector(".modal-close").addEventListener("click",(()=>{e()})),l.addEventListener("click",(n=>{n.stopImmediatePropagation(),n.target==l&&e()})),document.addEventListener("keydown",(n=>{"Escape"===n.code&&l.classList.contains("active")&&e()}))}()}(i)}catch(e){alert("Проверьте подключение к интернету!"),console.error(e)}var n}(function(){const e=document.querySelector(".form-header"),n=document.querySelector(".header-search");e.addEventListener("submit",(e=>{e.preventDefault(),$(document.querySelectorAll(".menu-item")),b.scrollIntoView({behavior:"smooth"});const t=`${s}${n.value}`;n.value&&(E(t),n.value=""),L.innerHTML=""}))})(),function(){const e=[f,y,g];e.forEach((n=>{n.addEventListener("click",(()=>{$(e),w(n),T(f)?h(i):T(y)?h(c):T(g)&&h(r)}))}))}();const S=document.querySelector(".header"),k=document.querySelector(".header-logo"),w=e=>e.classList.add("active"),T=e=>e.classList.contains("active");function $(e){e.forEach((e=>e.classList.remove("active")))}function q(){window.scrollY>0?S.classList.add("active"):S.classList.remove("active")}window.addEventListener("load",(()=>{document.getElementById("popular").click(),q()})),k.addEventListener("click",(()=>location.reload())),window.addEventListener("scroll",q)}},e=>{e(e.s=760)}]);